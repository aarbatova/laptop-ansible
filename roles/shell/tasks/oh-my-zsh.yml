- name: Install git and zsh
  yum: name={{ item }} state=latest
  with_items: [ 'git', 'zsh' ]

- name: Clone oh-my-zsh repo
  git: repo=https://github.com/robbyrussell/oh-my-zsh.git dest=/home/{{ user }}/.oh-my-zsh
  sudo: false

- name: deploy .zshrc
  copy: src=/home/{{ user }}/.oh-my-zsh/templates/zshrc.zsh-template dest=/home/{{ user }}/.zshrc owner={{ user }}
  sudo: false

- name: Set zsh as default shell
  user: name={{ user }} shell=/bin/zsh

- name: Install zsh syntax highlighting
  git: repo=https://github.com/zsh-users/zsh-syntax-highlighting.git dest=/home/{{ user }}/.oh-my-zsh/plugins/zsh-syntax-highlighting
  sudo: false
